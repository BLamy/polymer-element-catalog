<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/app-router/app-router.html">
<link rel="import" href="../app-bar/app-bar.html">

<link rel="import" href="../pages/page-packages.html">
<link rel="import" href="../pages/page-browse.html">
<link rel="import" href="../pages/page-element.html">

<dom-module id="catalog-app">
  <template>
    <app-router id="router" class="flex">
      <app-route path="/" element="page-packages" bindRouter></app-route>
      <app-route path="/browse" element="page-browse" bindRouter onUrlChange="updateModel"></app-route>
      <app-route path="/elements/:element/:view" element="page-element" bindRouter onUrlChange="updateModel"></app-route>
    </app-router>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'catalog-app',
    listeners: {
      'nav': 'handleNav'
    },
    toggleSearch: function() {
      this.$.search.active = !this.$.search.active;
    },
    performSearch: function(e) {
      e.preventDefault();
      if (this.query.length) this.$.router.go('/elements?q=' + this.query);
    },
    handleNav: function(_, nav) {
      this.$.router.go(nav.url);
    }
  });
</script>