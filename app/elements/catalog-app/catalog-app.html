<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/app-router/app-router.html">

<link rel="import" href="../pages/page-packages.html">
<link rel="import" href="../pages/page-browse.html">
<link rel="import" href="../pages/page-element.html">

<dom-module id="catalog-app">
  <template>
    <core-header-panel class="fit">
      <core-toolbar>
        <div class="flex">Polymer Element Catalog</div>
        <form on-submit="performSearch"><input id="query" type="search" value="{{query::keyup}}"></form>
      </core-toolbar>

      <app-router id="router" class="flex">
        <app-route path="/" element="page-packages"></app-route>
        <app-route path="/packages/:package" element="page-browse"></app-route>
        <app-route path="/elements" element="page-browse"></app-route>
        <app-route path="/elements/:element/:view" onUrlChange="updateModel" element="page-element"></app-route>
      </app-router>
    </core-header-panel>

    <catalog-search id="search"></catalog-search>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'catalog-app',
    listeners: {
      'nav': 'handleNav'
    },
    toggleSearch: function() {
      this.$.search.active = !this.$.search.active;
    },
    performSearch: function() {

    },
    handleNav: function(_, nav) {
      this.$.router.go(nav.url);
    }
  });
</script>