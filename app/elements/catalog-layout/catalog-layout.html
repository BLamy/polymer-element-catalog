<dom-module id="catalog-layout">
  <style>
    :host {
      display: block;
      padding: 2px 0;
    }
  </style>
  <template>
    <content></content>
  </template>
</dom-module>

<script src="/bower_components/packery/dist/packery.pkgd.js"></script>

<script>
  Polymer({
    is: 'catalog-layout',
    attached: function() {
      var context = this;
      this.packery = new Packery(this, {
        itemSelector: 'catalog-tile',
        transitionDuration: '0',
        isInitLayout: false
      });
      this.packery.on('layoutComplete', function(inst, items) {
        for (var i in items) {
          context.activateTile(items, i);
        }
      });
      this.packery.layout();
    },
    activateTile: function(items, i) {
      setTimeout(function() {
        items[i].element.classList.add('active');
      }, i * 100);
    }
  });
</script>