<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/app-router/app-router.html">

<link rel="import" href="../app-styles/app-styles.html">
<link rel="import" href="../app-logo/app-logo.html">
<link rel="import" href="../app-bar/app-bar.html">
<link rel="import" href="../app-sidebar/app-sidebar.html">

<link rel="import" href="../pages/page-packages.html">
<link rel="import" href="../pages/page-browse.html">
<link rel="import" href="../pages/page-element.html">
<link rel="import" href="../pages/page-guide.html">
<link rel="import" href="../pages/page-guides.html">

<dom-module id="app-shell">
  <template>
    <app-router id="router" class="flex" mode="pushstate">
      <app-route path="/" element="page-packages" bindRouter></app-route>
      <app-route path="/browse" element="page-browse" bindRouter onUrlChange="updateModel"></app-route>
      <app-route path="/elements/:element/:view" element="page-element" bindRouter onUrlChange="updateModel"></app-route>
      <app-route path="/guides" element="page-guides" bindRouter></app-route>
      <app-route path="/guides/*" element="page-guide" bindRouter onUrlChange="updateModel"></app-route>
      <app-route path="*">
        <template><h1>Not Found</h1></template>
      </app-route>
    </app-router>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'app-shell',
    listeners: {
      'nav': 'handleNav',
      'page-meta': 'updateTitle'
    },
    toggleSearch: function() {
      this.$.search.active = !this.$.search.active;
    },
    performSearch: function(e) {
      e.preventDefault();
      if (this.query.length) this.$.router.go('/elements?q=' + this.query);
    },
    handleNav: function(_, nav) {
      this.$.router.go(nav.url);
    },
    updateTitle: function(_, detail) {
      if (detail.title && detail.title.length) {
        document.title = detail.title + " - Polymer Element Catalog";
      } else {
        document.title = "Polymer Element Catalog";
      }
    }
  });
</script>