<link rel="import" href="../catalog-guide/catalog-guide.html">

<dom-module id="page-guide">
  <style>
    .content {
      display: block;
      padding: 16px;
    }
  </style>
  <template>
    <catalog-guide name="[[name]]" data="{{guide}}" content="{{content}}"></catalog-guide>

    <core-header-panel class="fit">
      <core-toolbar class="medium-tall">
        <app-logo full class="flex"></app-logo>
        <nav class="flex bottom">
          <a href="/" is="pushstate-anchor">Elements</a>
          <a class="active" href="/guides" is="pushstate-anchor">Guides</a>
        </nav>
        <app-bar class="horizontal layout center end-justified"></app-bar>
      </core-toolbar>

      <div class="content fit">
        <h1>{{guide.title}}</h1>
        <p>{{guide.summary}}</p>
        <div id="content"></div>
      </div>
    </core-header-panel>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'page-guide',
    properties: {
      router: Object,
      guide: Object,
      name: {
        type: String,
        notify: true
      },
      content: String
    },
    observers: {
      content: 'contentChanged',
      guide: 'updateMeta'
    },
    attached: function() {
      // TODO: Change this when we switch to pushState URLs
      this.name = window.location.pathname.substring(8);
    },
    contentChanged: function() {
      this.$.content.innerHTML = this.content;
    },
    updateMeta: function() {
      this.fire('page-meta', {title: this.guide.title});
    }
  });
</script>